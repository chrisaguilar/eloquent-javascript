<!doctype html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <title>Eloquent JavaScript - Chapter 13</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      html, body {
        height: 100%;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      div > div {
        height: 50px;
        position: relative;
        width: 50px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="move-me1" style='background-color: blue'></div>
      <div id="move-me2" style='background-color: orange'></div>
      <div id="move-me3" style='background-color: purple'></div>
      <div id="move-me4" style='background-color: black'></div>
    </div>
    <script>
      var box1 = document.querySelector('div#move-me1');
      var box2 = document.querySelector('div#move-me2');
      var box3 = document.querySelector('div#move-me3');
      var box4 = document.querySelector('div#move-me4');
      
      var angle = 0, lastTime = null;
      
      function animate(time) {
        if (lastTime != null) angle += (time - lastTime) * 0.0025;
        lastTime = time;
        
        box1.style.top = ((Math.sin(angle) * Math.sin(angle)) * 100) + 'px';
        box1.style.left = (Math.cos(angle) * 100) + 'px';

        box2.style.top = ((Math.cos(angle) * Math.cos(angle)) * 100) + 'px';
        box2.style.left = (Math.cos(angle) * 100) + 'px';

        box3.style.top = ((Math.cos(angle) * Math.sin(angle)) * 200) + 'px';
        box3.style.left = (Math.cos(angle) * 200) + 'px';

        var r = Math.abs(Math.floor(Math.sin(angle) * 256)),
            g = Math.abs(Math.floor(Math.cos(angle) * 256)),
            b = Math.abs(Math.floor(Math.tan(angle) * 256));
        box3.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;

        box4.style.top = (Math.sin(angle) * 100) + 'px';
        box4.style.left = (Math.cos(angle) * 100) + 'px';

        requestAnimationFrame(animate);
      }
      requestAnimationFrame(animate);
    </script>
  </body>
</html>
